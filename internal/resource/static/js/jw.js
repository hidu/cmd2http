(function(a){window.jw=window.jw||{};if(window.jw.version){return}window.jw={version:"20121103 1.0.4",ok_text:"确 定",alert_title:"提示",tab:function(d,f,c,b){var e=a(d),g=a(f);e.click(function(j){var h=e.index(this);if(c&&a.isFunction(c)){if(c.call(this,h,j)===false){return false}}e.removeClass("cur");a(this).addClass("cur");g.hide().eq(h).show()});if(e.filter(".cur").size()<1){e.eq(b||0).addClass("cur")}e.filter(".cur").trigger("click")},over:function(c){c=c||"show";var d,b=Math.max(a("body").height(),a(window).height());if(c=="show"){if(a(".jw-over").length){return false}d=a('<div class="jw-over" ></div>');a().ready(function(){a(document.body).append(d);a("html").addClass("jw-over-hidden");(typeof a.fn.bgiframe=="function")&&d.bgiframe();d.height(b)});return true}else{a("html").removeClass("jw-over-hidden");setTimeout(function(){a(".jw-over").remove()},1)}},position_fixed:function(g,f){g=a(g);f=f||window;var c=a.browser.msie&&a.browser.version<=6;var i=g.css("position");var d=a(f).scrollTop();if(!c){if(i!="fixed"){var h=g.offset();g.css({top:(h.top-d),position:"fixed"})}else{g.css({position:"fixed"})}return true}var b=parseInt(g.css("bottom"));var e=parseInt(g.css("top"));if(b){g.css({top:(a(f).height()+d-b-40),position:"absolute"})}else{g.css({top:(d+e-((i=="absolute")?d:0)),position:"absolute"})}a(f).bind("scroll resize",function(){var j=a(f).scrollTop();g.css({top:g.offset().top+j-d});d=j;j=null})},drag:function(j,i,g){var m=a(j),o=i?a(i):m,n,l,d=false,f,p;var c=o.css("position");g=g||window;var e=o.find("iframe"),h=null;m.mousedown(function(b){if(c!="absolute"&&c!="fixed"){o.css("position","absolute")}p=p||o.css("z-index");f=f||o.css("opacity")||1;n=b.clientX;l=b.clientY;d=true;c=o.css("position");m.css("cursor","move");o.css({opacity:f*0.7,"z-index":90000});if(e){setTimeout(function(){var q=e.height();h=("<div class='jw-drag-over' style='position: relative;width:100%;height:"+q+"px;margin-top:-"+q+"px;'></div>");h=e.after(h).next(".jw-drag-over")},1)}return false}).mouseup(k);a(g.document.body).mousemove(function(q){if(d){var b=o.offset();if(c=="fixed"){b={top:b.top-a(g).scrollTop(),left:b.left-a(g).scrollLeft()}}o.css({top:b.top+(q.clientY-l),left:b.left+(q.clientX-n)});n=q.clientX;l=q.clientY}return false}).mouseup(k);function k(b){d=false;m.css("cursor","default");o.css({opacity:f,"z-index":p});h&&h.remove();return false}},dialog:function(y){var r=y||{};y=a.extend({},{width:300,height:100,close:true,drag:true,over:true,fixed:true,id:null,html:null,title:"",iframeScroll:true,zIndex:301,onLoad:function(){},onClose:function(){},onMax:function(){},target:window},r);var C=y.target,J=a(C).width(),d=a(C).height(),v="jw-dialog-"+new Date().getTime(),e,G="top:"+(0.75*d/2+a(C).scrollTop())+"px;left:"+(J/2+a(C).scrollLeft())+"px;width:1px;height:1px",H="<div class='jw-dialog' id='"+v+"' style='"+G+"'><div class='jw-dialog-hd'></div><div class='jw-dialog-bd'></div></div>";G=null;H=a(C.document.body).append(H).find("#"+v);var E=false;y.over&&(E=this.over());y.fixed&&this.position_fixed(H,C);var M=a(".jw-dialog-bd",H),b=a(".jw-dialog-hd",H),t=false,u=false,x=this,c=b.outerHeight();var z,I;a(C).resize(function(){J=a(C).width();d=a(C).height()});setTimeout(function(){H.css("z-index",y.zIndex);w(y.width,y.height)},0);if(y.id){M.append(a(y.id).clone(true).show());n()}else{if(y.html!=null){M.append(y.html);n()}}if(y.title!==false){var K="<span><a href='javascript:;' ";e="<table width='100%'><tr><td><div class='jw-title'>"+("&nbsp;")+"</div></td><td style='width:55px;text-align:right'><nobr>";y.max!=false&&(e+=K+" class='max'>□</a></span>");y.close!=false&&(e+=K+" class='close'>X&nbsp;</a></span>");e+="</nobr></td></tr></table>";e=b.append(e).find("table")}else{b.remove();c=0}function o(s){y.title!==false&&e.find(".jw-title").text(s)}o(y.title);function h(N,s){((N+"").indexOf("%")>0)&&(N=(J*parseFloat(N)/100));((s+"").indexOf("%")>0)&&(s=(d*parseFloat(s)/100));(N<=1)&&(N=J*N);(s<=1)&&(s=d*s);return[parseInt(N),parseInt(s)]}if(y.width&&y.height){var A=h(y.width,y.height);y.width=A[0];y.height=A[1]}function w(O,s){var N=h(O,s);n(N[0],N[1])}function k(){u=H.css("position")=="fixed";return{top:u?0:a(C).scrollTop(),left:u?0:a(C).scrollLeft()}}function n(N,R){var O=Math.min(Math.max(R||0,y.height,140),d-5-c);var s=Math.min(Math.max(N||0,H.width(),y.width,300,M.width()),J);var Q=0.75*(d-O)/2+k().top,P=(J-s)/2+k().left;g(Q,P,s,O)}function g(P,N,O,s){if(!O||!s){return}z=O=Math.min(O,J);I=s=Math.min(s,d-c);H.animate({top:P,left:N,width:O,height:s+c});if(!y.iframe&&!t){M.css("height","auto")}else{M.animate({height:s})}}function m(N,s){H.animate({top:N,left:s})}var i={},D=0;function B(s){if(s){s.stopPropagation()}E&&x.over("close");if(0===y.onClose()){return false}H.animate({top:d/2+k().top,left:J/2,width:0,height:0},function(){H.remove()});return false}function l(P){if(P){P.stopPropagation()}var O=new Date().getTime();if(O-D<300){return false}D=O;if(t){t=false;g(i.top,i.left,i.width,i.height)}else{t=true;var N=k().top;i={top:H.offset().top-(u?a(C).scrollTop():0),left:H.offset().left,width:H.width(),height:M.height()};g(N,k().left,J,d-c);N=null}var s=e.find(".max");t?s.addClass("maxed"):s.removeClass("maxed");y.onMax();return false}function F(s,N){s=s||1;N=N||1;H.css({top:0.75*(d-N)/2,left:(J-s)/2,width:s,height:N+c});M.height(N)}var f={close:B,setSize:w,setBounds:g,setLocation:m,setTitle:o,setBody:function(s){M.html(s)},dialog:H,bd:M};if(y.rel){M.css("height","auto").empty().load(y.rel,function(){setTimeout(function(){n(M.width(),M.height())},100);setTimeout(function(){y.onLoad.call(f)},150)})}else{if(y.iframe){var j="<iframe class='jw-dialog-ifr iframe' src='"+y.iframe+"' style='width:100%;height:100%;border:0' frameborder=0 "+(y.iframeScroll?"":"scrolling=no")+" ></iframe>";j=M.append(j).find(".iframe");var q=false,L=null;setTimeout(function(){if(q){return}L="<div class='jw-dialog-loading' style='position: relative;width:100%;height:"+y.height+"px;margin-top:-"+y.height+"px;'><div style='margin-top:"+y.height/2+"px'>&nbsp;</div></div>";L=M.append(L).find(".jw-dialog-loading")},100);j.load(function(){q=true;if(L){L.remove();L=null}var P=null,s=0;try{P=a(this).contents();s=a("body",P).html().length}catch(O){}if(P){if(s>0){P.find(".close").click(B).end().find(".max").click(l);a("body",P).bind("close",B);if(y.title.length==0){var N=P.attr("title");if(N.length){o(N)}}setTimeout(function(){!r.width&&H.width(300);!r.height&&M.height(100);w(P.width(),P.height())},5)}else{w(y.width,y.height)}}else{n()}y.onLoad.call(f)})}else{y.onLoad.call(f)}}H.click(function(){var s=y.zIndex;a(".jw-dialog",C.document).not(H).each(function(){s=Math.max(s,parseInt(a(this).css("z-index"))+1)});H.css("z-index",s)});var p=function(){F(z,I);H.is(":visible")&&x.over()};a(C).resize(p);H.bind("close",B).find(".close").live("click mousedown",B).end().find(".max").live("click mousedown",l);if(y.close!==false){a(C).keydown(function(s){s.keyCode==27&&B()})}y.drag&&e&&this.drag(e,H,C);return f},msg:function(d,e,b){function c(){var f="<div class='jw-msg'><div class='jw-msg-bd'>"+d+"</div></div>";var g=a(f);g.appendTo("body").css("opacity",0.1).animate({opacity:0.8});jw.position_fixed(g);if(a.isFunction(e)){b=e;e=0}e=e||3000;if(a.isFunction(b)){g.bind("jw-msg-call",b)}if(e>0){setTimeout(function(){g.animate({opacity:0},2000,function(){a(this).remove()}).trigger("jw-msg-call")},e)}}if(a(".jw-msg").size()){a(".jw-msg").animate({width:0,height:0,left:a(window).width()/2},function(){a(this).trigger("jw-msg-call").remove();c()})}else{c()}},processbar:function(g,f){var e=a(g),d=e.find(".jw-pbar-t");if(!d.size()){e.addClass("jw-pbar").html("<div class='jw-pbar-t'>0%</div><div class='jw-pbar-v'>&nbsp;</div>");d=e.find(".jw-pbar-t")}var c=e.find(".jw-pbar-v");function b(h){h=parseInt(Math.min(Math.max(h||0,0),100));d.html(h+"%").width(e.width());c.css("width",h+"%")}b(f);return{val:function(h){if(typeof h=="undefined"){return parseInt(d.text())}else{b(h)}}}}}})(jQuery);(function(b){var a=function(j,e){e=b.extend({},{icon:1,ok:jw.ok_text,onOk:function(){},cancle:null,onCancle:function(){},title:jw.alert_title},e||{});var f=(e.icon+"").split("x"),h=f[0],g=f.length==2?f[1]:1;id="jwalert"+new Date().getTime(),style="background-position:-"+(h-1)*50+"px -"+(g-1)*50+"px;",code="<div class='jw-alert'><div class='jw-alert-icon' style='"+style+"'></div><div class='jw-alert-bd'>"+(j||"")+"</div><div style='clear:both'></div><div class='jw-alert-ft'><input type='button' value='&nbsp;"+e.ok+"&nbsp;' id='"+id+"_ok' />";if(e.cancle!=null){code+="&nbsp;&nbsp;<input type='button' value='&nbsp;"+e.cancle+"&nbsp;' id='"+id+"_cannel' />"}code+="</div></div>";style=h=f=null;var c=b(code),k=null,d=null;function i(l){if(l()===false){return}k.close()}b("#"+id+"_ok",c).click(function(){d&&clearTimeout(d);i(e.onOk)});b("#"+id+"_cannel",c).click(function(){i(e.onCancle)});k=jw.dialog({id:c,max:false,close:false,title:e.title,fixed:true,width:350,over:true});if(e.time){d=setTimeout(function(){i(e.onOk)},e.time)}};b.extend(jw,{alert:a})})(jQuery);